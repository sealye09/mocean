# 软件创建基础

**基于《Code Complete 代码大全》第1-3章**

## 概述

软件创建是软件开发的核心活动，占项目时间的 **30-80%**（取决于项目规模）。它包括详细设计、编码、调试和单元测试。

## 核心原则

### 什么是软件创建？

**定义**：实现软件的创造性决策过程，包括：
- 详细设计
- 编码和调试
- 单元测试
- 代码集成

**与其他活动的对比**：
- **管理**：项目规划、资源分配
- **需求分析**：理解要构建什么
- **架构设计**：高层系统设计
- **系统测试**：端到端验证
- **维护**：发布后的修改

### 为什么创建活动重要？

1. **时间影响**：占用开发生命周期最大的比例
2. **中心地位**：连接设计和测试的桥梁
3. **效率杠杆**：好的创建技术大幅提高生产率（优秀和普通程序员之间有10-20倍差异）
4. **主要产物**：源代码往往是系统唯一的准确文档

## 软件隐喻

将隐喻作为**启发式**（探照灯），而不是算法（地图）。它们提供理解问题的思维模型。

### 常见隐喻

#### 1. 写代码（Writing Code）
- **最适合**：小型、简单程序
- **局限性**：不能体现迭代、维护或团队协作
- **问题**：暗示一次性、线性过程

#### 2. 系统生长（增量开发）
- **最适合**：大多数现代软件开发
- **方法**：从最小可工作版本开始，逐步添加功能
- **优势**：降低每次变更的风险，实现早期反馈
- **关键洞察**："积累"（Accretion）- 像珍珠一样层层添加

#### 3. 建造软件（Building Software）
- **最适合**：理解项目规模差异
- **洞察**：
  - 小项目（狗窝）：快速、易于重新开始
  - 大项目（摩天大楼）：需要大量规划、基础工作
  - 材料很重要：使用现有库/组件，而不是从头构建
  - 结构变更一旦完成就很昂贵

#### 4. 智能工具箱（Intellectual Toolbox）
- **概念**：编程技术是工具，不是规则
- **原则**：没有单一工具是万能的
- **应用**：为每项工作选择合适的工具
- **警告**："如果你只有一把锤子，整个世界看起来都像钉子"

## 软件创建的先决条件

### 关键准备步骤

**在开始编码之前，确保：**

1. **问题定义**（我们要解决什么问题？）
   - 应该描述问题，而不是解决方案
   - 使用用户的语言，而不是技术术语
   - ✅ 好的例子："无法跟上订单处理"
   - ❌ 坏的例子："需要优化数据录入系统"（这是解决方案）

2. **需求分析**（系统必须做什么？）
   - 功能需求：系统做什么
   - 清晰的需求防止范围蔓延和返工
   - 必须在创建前获得用户批准
   - **变更成本**：在创建阶段修复需求错误的成本比定义阶段高50-100倍

3. **架构设计**（组件如何交互？）
   - 系统的高层组织
   - 技术栈决策
   - 接口规范
   - 数据架构

### 为什么准备工作很重要

**数据支持的理由：**
- 在需求阶段发现并修复的错误：成本 = 1x
- 在创建阶段发现并修复的错误：成本 = 5-15x
- 在发布后发现并修复的错误：成本 = 50-100x

**软件食物链效应：**
```
需求 → 架构 → 设计 → 代码 → 测试
```
任何阶段的污染都会影响所有下游阶段。

## 实践应用

### 开始新工作时的检查清单

- [ ] 问题明确定义（不仅是解决方案）
- [ ] 需求已记录并获得用户批准
- [ ] 架构已审查并达成一致
- [ ] 技术方法已验证
- [ ] 团队理解约束和优先级

### 如果管理层推动过早编码

**应对策略：**
1. **教育**：解释返工成本（使用上述数据）
2. **协商**："我可以开始编码，但稍后需要[X]时间进行返工"
3. **展示**：证明规划可以缩短总时间
4. **抵制**："在需求准备好之前写代码会延误项目"

### 心理模型

**像建造者一样思考，而不仅仅是写作者：**
- 小棚屋 → 最少规划，易于重新开始
- 家庭住宅 → 需要蓝图，基础至关重要
- 摩天大楼 → 大量规划，安全余量，分阶段方法

**将准备工作与项目规模匹配：**
```
小项目（<1周） → 最少规划
中等项目（1-3个月） → 需求 + 架构
大项目（>3个月） → 完整生命周期准备
```

## 常见陷阱

### ❌ 不要
- 在没有明确需求的情况下开始编码
- 无论项目规模如何，都采用相同的方式
- 忽视上游问题（需求差、架构不清）
- 假设"我们以后可以修复"（成本呈指数增长）
- 只使用一种隐喻/思维模型

### ✅ 应该
- 在编码前验证先决条件
- 根据项目规模/复杂度调整流程严谨度
- 当被要求跳过准备工作时推动back
- 使用多个隐喻理解不同方面
- 专注于预防错误而不是仅仅发现错误

## 何时参考此内容

在以下情况下查阅此基础材料：
- 开始新项目或功能
- 向利益相关者解释为什么规划很重要
- 确定适当的准备水平
- 选择开发方法（瀑布 vs. 增量 vs. 敏捷）
- 感到跳过需求/规划的压力

## 相关阅读

- **设计先决条件**：参见 `03-design.md`
- **构建技术**：参见 `02-routines.md`
- **质量实践**：参见 `07-quality.md`
